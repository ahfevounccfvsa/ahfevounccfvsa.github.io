<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="JavaFx TableView详解"/>







  <link rel="alternate" href="/atom.xml" title="cmlanche">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.3.x" />



<link rel="canonical" href="http://www.cmlanche.com/2017/06/08/JavaFx-TableView详解/"/>


<meta name="description" content="TableView是个十分有用的控件，适应性和灵活性非常强，可以对它进行任意的修改，比如界面样式、功能。本文将从一步步提问的方式讲解TableView">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaFx TableView详解">
<meta property="og:url" content="http://www.cmlanche.com/2017/06/08/JavaFx-TableView详解/index.html">
<meta property="og:site_name" content="cmlanche">
<meta property="og:description" content="TableView是个十分有用的控件，适应性和灵活性非常强，可以对它进行任意的修改，比如界面样式、功能。本文将从一步步提问的方式讲解TableView">
<meta property="og:updated_time" content="2017-06-08T05:32:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaFx TableView详解">
<meta name="twitter:description" content="TableView是个十分有用的控件，适应性和灵活性非常强，可以对它进行任意的修改，比如界面样式、功能。本文将从一步步提问的方式讲解TableView">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.3.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  



    <title> JavaFx TableView详解 · cmlanche </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">cmlanche</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">cmlanche</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          JavaFx TableView详解
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jun 8, 2017
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建已知列的TableView"><span class="toc-text">创建已知列的TableView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建动态列的TableView"><span class="toc-text">创建动态列的TableView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列拖动-如何捕获列拖动事件？"><span class="toc-text">[列拖动] 如何捕获列拖动事件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列拖动-如何防止第一列被拖动？"><span class="toc-text">[列拖动] 如何防止第一列被拖动？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列拖动-如何禁用列拖动效果？"><span class="toc-text">[列拖动] 如何禁用列拖动效果？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#行拖动-如何拖动行，进行换行？"><span class="toc-text">[行拖动] 如何拖动行，进行换行？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改TableView样式"><span class="toc-text">修改TableView样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何自定义列头，比如自己设置一个可编辑的列头呢？"><span class="toc-text">如何自定义列头，比如自己设置一个可编辑的列头呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最后欢迎加入我的javafx探讨群：518914410"><span class="toc-text">最后欢迎加入我的javafx探讨群：518914410</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>TableView是个十分有用的控件，适应性和灵活性非常强，可以对它进行任意的修改，比如界面样式、功能。本文将从一步步提问的方式讲解TableView</p>
<a id="more"></a>
<ol>
<li><h3 id="创建已知列的TableView"><a href="#创建已知列的TableView" class="headerlink" title="创建已知列的TableView"></a>创建已知列的TableView</h3><p>已知列的表格的创建，需要把TableView的TableColumn关联到模型的属性，TableView是个模板类，其实是TableView<t>，这个T就是模型，例如下代码：</t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MyModel.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyModel</span></span>&#123;</div><div class="line">  <span class="keyword">private</span> String name;</div><div class="line">  <span class="keyword">private</span> String url;</div><div class="line">  <span class="comment">// getters, setters</span></div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"><span class="comment">// init your tableView</span></div><div class="line">TableColumn&lt;MyModel, String&gt; t1 = <span class="keyword">new</span> TableColumn();</div><div class="line"><span class="comment">// 关联MyModel中的name属性</span></div><div class="line">t1.setCellValueFactory(<span class="keyword">new</span> PropertyValueFactory&lt;&gt;(<span class="string">"name"</span>)); </div><div class="line">t1.setCellFactory(p-&gt;&#123;</div><div class="line">  <span class="comment">// 创建此列的Cell的时候的回调，允许让你自己去创建</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>特别要说明的是</strong>，<code>setCellValueFactory</code>和<code>setCellFactory</code>不是冲突的，我用的时候一直以为是冲突，就是只能用其中一个，另外一个就失效了，其实不是，setCellFactory它的意图是在创建这列的时候要做的事情，你可以改变TableCell的任何内容，包括UI和Value，而setCellValueFactory呢，它的重点是关联属性，从你传递给它的Model中通过对应属性的getter来获取值。在setCellFactory中的TableCell有个回调，叫<code>updateItem</code>，它可以获取到你设置到此Cell的值，这个值是跟setCellValueFactory所关联的属性有关。</p>
</li>
<li><h3 id="创建动态列的TableView"><a href="#创建动态列的TableView" class="headerlink" title="创建动态列的TableView"></a>创建动态列的TableView</h3><p>参考：<a href="https://community.oracle.com/thread/2474328" target="_blank" rel="external">https://community.oracle.com/thread/2474328</a></p>
<p>因为列是不定的，模型是没有属性对应的，创建列的时候你根本不知道列是什么，看如下实现代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">column.setCellValueFactory(param -&gt; &#123;</div><div class="line">            ObservableList&lt;VarCell&gt; values = param.getValue();</div><div class="line">            <span class="keyword">if</span> (columnIndex &gt;= values.size()) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SimpleObjectProperty&lt;&gt;(<span class="keyword">null</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SimpleObjectProperty&lt;&gt;(param.getValue().get(columnIndex));</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>创建动态列的tableview，它的模型是一个<code>ObservableList&lt;T&gt;</code>，你的<code>setCellValueFactory</code>不能使用<code>PropertyValueFactory</code>，而是如上代码所示，<strong>通过列的索引来获取此列的值</strong></p>
</li>
<li><h3 id="列拖动-如何捕获列拖动事件？"><a href="#列拖动-如何捕获列拖动事件？" class="headerlink" title="[列拖动] 如何捕获列拖动事件？"></a><strong>[列拖动]</strong> 如何捕获列拖动事件？</h3><p>列拖动是tablview一个默认的自带的效果，但是并没有专门的事件给你去监听它，而是监听列的变化，方法：给tableview的columns添加Listener,判断变动列的状态是否是replaced的状态，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">tableView.getColumns().addListener(<span class="keyword">new</span> ListChangeListener&lt;TableColumn&lt;ObservableList&lt;VarCell&gt;, ?&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onChanged</span><span class="params">(Change&lt;? extends TableColumn&lt;ObservableList&lt;VarCell&gt;, ?&gt;&gt; change)</span> </span>&#123;</div><div class="line">                change.next();</div><div class="line">                <span class="keyword">if</span> (change.wasReplaced()) &#123;</div><div class="line">                    <span class="comment">// 表示当前拖动过了</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
</li>
<li><h3 id="列拖动-如何防止第一列被拖动？"><a href="#列拖动-如何防止第一列被拖动？" class="headerlink" title="[列拖动] 如何防止第一列被拖动？"></a><strong>[列拖动]</strong> 如何防止第一列被拖动？</h3><p>在上一问的基础上，实现第一列不允许被拖动的功能。</p>
<p>参考：<a href="https://stackoverflow.com/questions/30645606/javafx-restrict-column-rearrangement-on-drag-and-drop" target="_blank" rel="external">https://stackoverflow.com/questions/30645606/javafx-restrict-column-rearrangement-on-drag-and-drop</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">tableView.getColumns().addListener(<span class="keyword">new</span> ListChangeListener&lt;TableColumn&lt;ObservableList&lt;String&gt;, ?&gt;&gt;() &#123;</div><div class="line">            <span class="keyword">private</span> <span class="keyword">boolean</span> suspended;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onChanged</span><span class="params">(Change&lt;? extends TableColumn&lt;ObservableList&lt;String&gt;, ?&gt;&gt; change)</span> </span>&#123;</div><div class="line">                change.next();</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (change.wasReplaced() &amp;&amp; !suspended) &#123;</div><div class="line">                    List&lt;TableColumn&lt;ObservableList&lt;String&gt;, ?&gt;&gt; oldList = <span class="keyword">new</span> ArrayList&lt;&gt;(change.getRemoved());</div><div class="line">                    List&lt;TableColumn&lt;ObservableList&lt;String&gt;, ?&gt;&gt; newList = <span class="keyword">new</span> ArrayList&lt;&gt;(tableView.getColumns());</div><div class="line"></div><div class="line">                    <span class="comment">// first column changed =&gt; revert to original list</span></div><div class="line">                    <span class="keyword">if</span> (oldList.get(<span class="number">0</span>) != newList.get(<span class="number">0</span>)) &#123;</div><div class="line">                        <span class="keyword">this</span>.suspended = <span class="keyword">true</span>;</div><div class="line">                        tableView.getColumns().setAll(oldList);</div><div class="line">                        <span class="keyword">this</span>.suspended = <span class="keyword">false</span>;</div><div class="line">                    &#125; </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>上面的代码中有三个关键的地方，是tableview原本提供的api，一个是<code>change.wasReplaced</code>表示当前的变动是否被替换了，第二个是<code>change.getRemoved</code>，表示获取要移除掉的列，进一步的意思就是原来的列，也就是此前的tablecolumns，第三个是<code>tableview.getColumns</code>这个是获取现在列，有了这些信息，就可以判断，<code>oldList.get(0)!=newList(0)</code>，表示如果新老列的第一列不相同，表示是第一列是变动的，但是我们不允许变动，因此，调用<code>tableview.getColumns().setAll(oldList)</code>用来恢复原来的列。这样就禁止拖动第一列了。</p>
</li>
<li><h3 id="列拖动-如何禁用列拖动效果？"><a href="#列拖动-如何禁用列拖动效果？" class="headerlink" title="[列拖动] 如何禁用列拖动效果？"></a><strong>[列拖动]</strong> 如何禁用列拖动效果？</h3><p>参考：<a href="https://stackoverflow.com/questions/22202782/how-to-prevent-tableview-from-doing-tablecolumn-re-order-in-javafx-8" target="_blank" rel="external">https://stackoverflow.com/questions/22202782/how-to-prevent-tableview-from-doing-tablecolumn-re-order-in-javafx-8</a></p>
<p>给列设置一个属性：<code>column.impl_setReorderable(false);</code></p>
<p><code>impl_setReorderable</code>前面带<strong>impl_</strong>前缀，表示它是一个将来可能会被删除的方法，但是为了解决目前无法解决的问题，暂时把impl的私有方法改为了public方法，参考我的博客中的如何<a href="http://cmlanche.com/2017/05/02/JavaFx%E8%87%AA%E5%AE%9A%E4%B9%89Tab%20Order/" target="_blank" rel="external">自定义Taborder</a>的文章，是一样的道理。</p>
</li>
<li><h3 id="行拖动-如何拖动行，进行换行？"><a href="#行拖动-如何拖动行，进行换行？" class="headerlink" title="[行拖动] 如何拖动行，进行换行？"></a><strong>[行拖动]</strong> 如何拖动行，进行换行？</h3><p>参考：<a href="https://stackoverflow.com/questions/28603224/sort-tableview-with-drag-and-drop-rows" target="_blank" rel="external">https://stackoverflow.com/questions/28603224/sort-tableview-with-drag-and-drop-rows</a></p>
<p>已经测试过的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">tableView.setRowFactory(tv -&gt; &#123;</div><div class="line">            TableRow&lt;ObservableList&lt;String&gt;&gt; row = <span class="keyword">new</span> TableRow&lt;&gt;();</div><div class="line"></div><div class="line">            row.setOnDragDetected(event -&gt; &#123;</div><div class="line">                log.info(<span class="string">"row drag detected"</span>);</div><div class="line">                <span class="keyword">if</span> (!row.isEmpty()) &#123;</div><div class="line">                    Integer index = row.getIndex();</div><div class="line">                    Dragboard db = row.startDragAndDrop(TransferMode.MOVE);</div><div class="line">                    db.setDragView(row.snapshot(<span class="keyword">null</span>, <span class="keyword">null</span>));</div><div class="line">                    ClipboardContent cc = <span class="keyword">new</span> ClipboardContent();</div><div class="line">                    cc.put(SERIALIZED_MIME_TYPE, index);</div><div class="line">                    db.setContent(cc);</div><div class="line">                    event.consume();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            row.setOnDragOver(event -&gt; &#123;</div><div class="line">                log.info(<span class="string">"row drag over"</span>);</div><div class="line">                Dragboard db = event.getDragboard();</div><div class="line">                <span class="keyword">if</span> (db.hasContent(SERIALIZED_MIME_TYPE)) &#123;</div><div class="line">                    <span class="keyword">if</span> (row.getIndex() != ((Integer) db.getContent(SERIALIZED_MIME_TYPE)).intValue()) &#123;</div><div class="line">                        event.acceptTransferModes(TransferMode.COPY_OR_MOVE);</div><div class="line">                        event.consume();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            row.setOnDragDropped(event -&gt; &#123;</div><div class="line">                log.info(<span class="string">"row drag dropped"</span>);</div><div class="line">                Dragboard db = event.getDragboard();</div><div class="line">                <span class="keyword">if</span> (db.hasContent(SERIALIZED_MIME_TYPE)) &#123;</div><div class="line">                    <span class="keyword">int</span> draggedIndex = (Integer) db.getContent(SERIALIZED_MIME_TYPE);</div><div class="line">                    ObservableList&lt;String&gt; draggedPerson = tableView.getItems().remove(draggedIndex);</div><div class="line"></div><div class="line">                    <span class="keyword">int</span> dropIndex;</div><div class="line"></div><div class="line">                    <span class="keyword">if</span> (row.isEmpty()) &#123;</div><div class="line">                        dropIndex = tableView.getItems().size();</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        dropIndex = row.getIndex();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    tableView.getItems().add(dropIndex, draggedPerson);</div><div class="line"></div><div class="line">                    event.setDropCompleted(<span class="keyword">true</span>);</div><div class="line">                    tableView.getSelectionModel().select(dropIndex);</div><div class="line">                    event.consume();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            <span class="keyword">return</span> row;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
</li>
<li><h3 id="修改TableView样式"><a href="#修改TableView样式" class="headerlink" title="修改TableView样式"></a>修改TableView样式</h3><p>使用css，参考如下我的测试代码</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.table-view</span> &#123;</div><div class="line">    <span class="attribute">-fx-border-width</span>: <span class="number">1px</span>;</div><div class="line">    <span class="attribute">-fx-border-color</span>: <span class="number">#CACACA</span>;</div><div class="line">    <span class="attribute">-fx-background-color</span>: transparent;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span><span class="selector-pseudo">:focused</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: transparent;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.table-cell</span> &#123;</div><div class="line">    <span class="attribute">-fx-font-size</span>: <span class="number">12px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.filler</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: <span class="number">#BDE8FF</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.text</span> &#123;</div><div class="line">    <span class="attribute">-fx-text-fill</span>: red;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.column-header</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: <span class="number">#BDE8FF</span>;</div><div class="line">    <span class="attribute">-fx-pref-height</span>: <span class="number">37px</span>;</div><div class="line">    <span class="attribute">-fx-border-width</span>: <span class="number">1px</span>;</div><div class="line">    <span class="attribute">-fx-border-color</span>: <span class="number">#D9D9D9</span>;</div><div class="line">    <span class="attribute">-fx-border-insets</span>: -<span class="number">2px</span> -<span class="number">2px</span> <span class="number">0px</span> -<span class="number">2px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.column-header-background</span> <span class="selector-class">.label</span> &#123;</div><div class="line">    <span class="attribute">-fx-text-fill</span>: <span class="number">#363739</span>;</div><div class="line">    <span class="attribute">-fx-font-weight</span>: normal;</div><div class="line">    <span class="attribute">-fx-font-size</span>: <span class="number">12px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-row-cell</span> &#123;</div><div class="line">    <span class="comment">/*行高*/</span></div><div class="line">    <span class="attribute">-fx-cell-size</span>: <span class="number">35px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-row-cell</span> <span class="selector-class">.cell</span> &#123;</div><div class="line">    <span class="attribute">-fx-alignment</span>: center;</div><div class="line">    <span class="attribute">-fx-text-fill</span>: <span class="number">#333333</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.table-cell</span><span class="selector-pseudo">:selected</span> &#123;</div><div class="line">    <span class="attribute">-fx-text-fill</span>: white;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.table-column</span> <span class="selector-class">.column-header</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: <span class="number">#363739</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.cell</span> &#123;</div><div class="line">    <span class="comment">/*-fx-border-width: 0px 1px 0 0;*/</span></div><div class="line">    <span class="comment">/*-fx-border-color: #CACACA;*/</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.table-view</span> <span class="selector-class">.scroll-bar</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: transparent;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.viewport</span> &#123;</div><div class="line">    <span class="attribute">-fx-background-color</span>: white;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="如何自定义列头，比如自己设置一个可编辑的列头呢？"><a href="#如何自定义列头，比如自己设置一个可编辑的列头呢？" class="headerlink" title="如何自定义列头，比如自己设置一个可编辑的列头呢？"></a>如何自定义列头，比如自己设置一个可编辑的列头呢？</h3><p>答案是给你的TableColumn设置<code>setGraphic</code>，可编辑的列头的话，你让你的graphic中有编辑框，双击显示编辑框，按enter键确认编辑，如下是一个我的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.itestin.ui.datamgt.table;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.itestin.ui.recordNreplay.logic.CommonLogic;</div><div class="line"><span class="keyword">import</span> javafx.beans.property.BooleanProperty;</div><div class="line"><span class="keyword">import</span> javafx.beans.property.SimpleBooleanProperty;</div><div class="line"><span class="keyword">import</span> javafx.beans.property.SimpleStringProperty;</div><div class="line"><span class="keyword">import</span> javafx.beans.property.StringProperty;</div><div class="line"><span class="keyword">import</span> javafx.geometry.Pos;</div><div class="line"><span class="keyword">import</span> javafx.scene.control.Label;</div><div class="line"><span class="keyword">import</span> javafx.scene.control.TableColumn;</div><div class="line"><span class="keyword">import</span> javafx.scene.control.TextField;</div><div class="line"><span class="keyword">import</span> javafx.scene.control.Tooltip;</div><div class="line"><span class="keyword">import</span> javafx.scene.input.KeyCode;</div><div class="line"><span class="keyword">import</span> javafx.scene.layout.StackPane;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by cmlanche on 2017/6/1.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EditColumn</span> <span class="keyword">extends</span> <span class="title">StackPane</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> EditColumnCallback callback;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Label label;</div><div class="line">    <span class="keyword">private</span> TextField textField;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> StringProperty title;</div><div class="line">    <span class="keyword">private</span> BooleanProperty editing;</div><div class="line">    <span class="keyword">private</span> BooleanProperty editable;</div><div class="line">    <span class="keyword">private</span> BooleanProperty textFieldFocus;</div><div class="line">    <span class="keyword">private</span> TableColumn tableColumn;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String oldTitle;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EditColumn</span><span class="params">(TableColumn tableColumn)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.tableColumn = tableColumn;</div><div class="line">        <span class="keyword">this</span>.init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.setMaxWidth(<span class="number">120</span>);</div><div class="line">        <span class="keyword">this</span>.setAlignment(Pos.CENTER);</div><div class="line">        <span class="keyword">this</span>.setStyle(<span class="string">"-fx-background-color: #D9D9D9;"</span>);</div><div class="line">        label = <span class="keyword">new</span> Label();</div><div class="line">        label.setStyle(<span class="string">"-fx-font-size: 12px; -fx-text-fill: #333333;"</span>);</div><div class="line">        textField = <span class="keyword">new</span> TextField();</div><div class="line">        textField.getStyleClass().add(<span class="string">"tablefx-header-editor"</span>);</div><div class="line">        label.textProperty().bindBidirectional(titleProperty());</div><div class="line">        textField.textProperty().bindBidirectional(titleProperty());</div><div class="line">        label.setTooltip(<span class="keyword">new</span> Tooltip());</div><div class="line">        label.getTooltip().textProperty().bindBidirectional(label.textProperty());</div><div class="line">        <span class="keyword">this</span>.getChildren().addAll(label, textField);</div><div class="line">        editingProperty().addListener((observable, oldValue, newValue) -&gt; &#123;</div><div class="line">            <span class="keyword">if</span> (isEditable()) &#123;</div><div class="line">                <span class="keyword">if</span> (newValue) &#123;</div><div class="line">                    label.setVisible(<span class="keyword">false</span>);</div><div class="line">                    textField.setVisible(<span class="keyword">true</span>);</div><div class="line">                    textField.setFocusTraversable(<span class="keyword">true</span>);</div><div class="line">                    textField.requestFocus();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    label.setVisible(<span class="keyword">true</span>);</div><div class="line">                    textField.setVisible(<span class="keyword">false</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        textField.textProperty().addListener((observable, oldValue, newValue) -&gt; &#123;</div><div class="line">            <span class="keyword">if</span> (CommonLogic.isInValidVar(newValue)) &#123;</div><div class="line">                textField.setStyle(<span class="string">"-fx-border-color: red;"</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                textField.setStyle(<span class="string">""</span>);</div><div class="line">                textField.setStyle(<span class="string">"-fx-border-color: #25B3FA;"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">this</span>.setStyle(<span class="string">"-fx-background-color: transparent;"</span>);</div><div class="line">        textField.setOnKeyPressed(event -&gt; &#123;</div><div class="line">            <span class="keyword">if</span> (isEditing()) &#123;</div><div class="line">                <span class="keyword">if</span> (event.getCode() == KeyCode.ENTER) &#123;</div><div class="line">                    event.consume(); <span class="comment">// 放置对tabview的其他列产生影响，不让消息透传</span></div><div class="line">                    oldTitle = textField.getText();</div><div class="line">                    setEditing(<span class="keyword">false</span>);</div><div class="line">                    <span class="comment">// 提交编辑</span></div><div class="line">                    <span class="keyword">if</span> (callback != <span class="keyword">null</span>) &#123;</div><div class="line">                        callback.editCommit(tableColumn, textField.getText());</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.getCode() == KeyCode.ESCAPE) &#123;</div><div class="line">                    setTitle(oldTitle);</div><div class="line">                    setEditing(<span class="keyword">false</span>);</div><div class="line">                    <span class="comment">// 取消编辑</span></div><div class="line">                    <span class="keyword">if</span> (callback != <span class="keyword">null</span>) &#123;</div><div class="line">                        callback.cancelEdit();</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.getCode() == KeyCode.TAB) &#123;</div><div class="line">                    setEditing(<span class="keyword">false</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        textFieldFocusProperty().addListener((observable, oldValue, newValue) -&gt; &#123;</div><div class="line">            <span class="keyword">if</span> (newValue) &#123;</div><div class="line">                textField.setFocusTraversable(<span class="keyword">true</span>);</div><div class="line">                textField.requestFocus();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        setEditing(<span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> titleProperty().get();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> StringProperty <span class="title">titleProperty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (title == <span class="keyword">null</span>) &#123;</div><div class="line">            title = <span class="keyword">new</span> SimpleStringProperty();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> title;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.oldTitle = title;</div><div class="line">        <span class="keyword">this</span>.titleProperty().set(title);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEditing</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> editingProperty().get();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> BooleanProperty <span class="title">editingProperty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (editing == <span class="keyword">null</span>) &#123;</div><div class="line">            editing = <span class="keyword">new</span> SimpleBooleanProperty(<span class="keyword">true</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> editing;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEditing</span><span class="params">(<span class="keyword">boolean</span> editing)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.editingProperty().set(editing);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEditCallback</span><span class="params">(EditColumnCallback callback)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.callback = callback;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEditable</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> editableProperty().get();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> BooleanProperty <span class="title">editableProperty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (editable == <span class="keyword">null</span>) &#123;</div><div class="line">            editable = <span class="keyword">new</span> SimpleBooleanProperty(<span class="keyword">true</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> editable;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEditable</span><span class="params">(<span class="keyword">boolean</span> editable)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.editableProperty().set(editable);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isTextFieldFocus</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> textFieldFocusProperty().get();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> BooleanProperty <span class="title">textFieldFocusProperty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (textFieldFocus == <span class="keyword">null</span>) &#123;</div><div class="line">            textFieldFocus = <span class="keyword">new</span> SimpleBooleanProperty();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> textFieldFocus;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextFieldFocus</span><span class="params">(<span class="keyword">boolean</span> textFieldFocus)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.textFieldFocusProperty().set(textFieldFocus);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<h3 id="最后欢迎加入我的javafx探讨群：518914410"><a href="#最后欢迎加入我的javafx探讨群：518914410" class="headerlink" title="最后欢迎加入我的javafx探讨群：518914410"></a>最后欢迎加入我的javafx探讨群：<code>518914410</code></h3>
      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>cmlanche</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="http://www.cmlanche.com">http://www.cmlanche.com</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://www.cmlanche.com/2017/06/08/JavaFx-TableView详解/">http://www.cmlanche.com/2017/06/08/JavaFx-TableView详解/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
        
        
  <nav class="post-nav">
    
    
      <a class="next" href="/2017/06/06/JavaFx新手入门布局介绍/">
        <span class="next-text nav-default">JavaFx新手入门布局介绍</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017
    <span class="author"><a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备17020143号</a></span>
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">cmlanche</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.3.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.3.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            Read more..
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.3.x"></script>

  </body>
</html>
