<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Jenkins自动集成小记"/>







  <link rel="alternate" href="/atom.xml" title="cmlanche">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.3.x" />



<link rel="canonical" href="http://www.cmlanche.com/2017/08/10/Jenkins自动集成小记(一)/"/>


<meta name="description" content="Jenkins是用来自动构建任务的，也许你还不知道什么叫自动构建任务，它的意思是可以针对某个任务进行自动化，比如你开发的某个软件，每次写完代码提交到github之后，你可以设置让Jenkins自动进行打包构建发布包或者进行Units测试，发布报告，不用你每次手工在IDE中去Build，尤其是当打包非常繁琐的时候，用自动化构建可以极大的提高工作效率。">
<meta property="og:type" content="article">
<meta property="og:title" content="Jenkins自动集成小记">
<meta property="og:url" content="http://www.cmlanche.com/2017/08/10/Jenkins自动集成小记(一)/index.html">
<meta property="og:site_name" content="cmlanche">
<meta property="og:description" content="Jenkins是用来自动构建任务的，也许你还不知道什么叫自动构建任务，它的意思是可以针对某个任务进行自动化，比如你开发的某个软件，每次写完代码提交到github之后，你可以设置让Jenkins自动进行打包构建发布包或者进行Units测试，发布报告，不用你每次手工在IDE中去Build，尤其是当打包非常繁琐的时候，用自动化构建可以极大的提高工作效率。">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-225528@2x.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-225926@2x.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230126@2x.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230041@2x.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/3ECD3136-0E4B-4507-BD7C-90CDA2883D17.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230230@2x.png">
<meta property="og:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230641@2x.png">
<meta property="og:updated_time" content="2017-08-10T15:47:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jenkins自动集成小记">
<meta name="twitter:description" content="Jenkins是用来自动构建任务的，也许你还不知道什么叫自动构建任务，它的意思是可以针对某个任务进行自动化，比如你开发的某个软件，每次写完代码提交到github之后，你可以设置让Jenkins自动进行打包构建发布包或者进行Units测试，发布报告，不用你每次手工在IDE中去Build，尤其是当打包非常繁琐的时候，用自动化构建可以极大的提高工作效率。">
<meta name="twitter:image" content="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-225528@2x.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.3.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  




  <link rel="stylesheet" type="text/css" href="/lib/index.css" />

    <title> Jenkins自动集成小记 · cmlanche </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">cmlanche</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">cmlanche</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Jenkins自动集成小记
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Aug 10, 2017
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装Jenkins"><span class="toc-text">安装Jenkins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个任务"><span class="toc-text">创建一个任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#邮件通知"><span class="toc-text">邮件通知</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jenkins分享（一）小结"><span class="toc-text">Jenkins分享（一）小结</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>Jenkins是用来自动构建任务的，也许你还不知道什么叫自动构建任务，它的意思是可以针对某个任务进行自动化，比如你开发的某个软件，每次写完代码提交到<code>github</code>之后，你可以设置让Jenkins自动进行打包构建发布包或者进行Units测试，发布报告，不用你每次手工在<code>IDE</code>中去Build，尤其是当打包非常繁琐的时候，用自动化构建可以极大的提高工作效率。</p>
<a id="more"></a>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>公司是同事使用<code>Jenkins</code>做的自动化构建，非常方便，每次提交代码，自动检测打包是否成功，然后发送邮件通知，因为我们集成了<code>findingbugs</code>插件，在打包前还会对代码进行<code>findingbus</code>检索，告诉你<code>findingbus</code>的状态，还会生成release的发布包，非常之方便。</p>
<p><code>wement.io</code>这个项目我想多人协作开发，自然想到了Jenkins，让大家能够配合的非常的舒服，昨天折腾了三小时，搞定了<code>Jenkins</code>，其中包括怎么创建一个任务，怎么设置<code>github</code>，和<code>github</code>的项目挂钩，怎么设置邮件通知。</p>
<h3 id="安装Jenkins"><a href="#安装Jenkins" class="headerlink" title="安装Jenkins"></a>安装<code>Jenkins</code></h3><p>直接去<code>Jenkins</code>官网下载<code>war</code>包，我这里是直接部署在阿里云的centos7上的，然后用<code>scp xxx.war root@yourip:/home</code>直接从本地拷贝到云服务器上，拷贝之后直接用<code>java -jar xxx.war</code>就可以运行成功了，如果你期望退出命令行还不关闭<code>Jenkins</code>的话，就用命令<code>nohug java -jar xxx.war</code>来运行包，java进程自动在后台运行了，关闭命令行窗口也不会退出程序，这样你的<code>Jenkins</code>就运行了，默认端口监听在8080，如果你也是用的云服务器，请确保你的8080端口是允许访问的。</p>
<p>当然，要运行<code>Jenkins</code>，你需要安装Java环境，如果你的代码仓库用<code>git</code>的话请安装git，分别命令如下：</p>
<p><code>yum install java</code></p>
<p><code>yum install git</code></p>
<p>还没有完，Jenkins运行成功了，你再在浏览器上打开<code>yourip:8080</code>跟随<code>Jenkins</code>安装向导，用默认提示安装完成即可，接下来就是创建任务了。</p>
<h3 id="创建一个任务"><a href="#创建一个任务" class="headerlink" title="创建一个任务"></a>创建一个任务</h3><p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-225528@2x.png" alt=""></p>
<p>选择第一性，<code>构建一个自由风格的软件项目</code></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-225926@2x.png" alt=""></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230126@2x.png" alt=""></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230041@2x.png" alt=""></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/3ECD3136-0E4B-4507-BD7C-90CDA2883D17.png" alt=""></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230230@2x.png" alt=""></p>
<p><img src="http://onrd7xdyg.bkt.clouddn.com/QQ20170810-230641@2x.png" alt=""></p>
<p>然后保存即可，任务创建完成。但是如果你的项目是私有项目，你需要在你的服务器上生成ssh，然后贴到你的github上，这样做的目的是然github信任你的这个服务器，同时要注意你的Jenkins控制台，有可能要你输入ssh的证书密码。</p>
<h3 id="邮件通知"><a href="#邮件通知" class="headerlink" title="邮件通知"></a>邮件通知</h3><p>一般来说这个时候右键通知是没问题的，但是我今天发现我提交代码之后，任务并没有自动构建，然后看<code>Jenkins</code>打的log是这样的：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">22:23:55 [WARNING] mvn dependency:tree -Ddetail=true and the above output.</div><div class="line">22:23:55 [WARNING] See http://maven.apache.org/plugins/maven-shade-plugin/</div><div class="line">22:23:56 [INFO] ------------------------------------------------------------------------</div><div class="line">22:23:56 [INFO] BUILD SUCCESS</div><div class="line">22:23:56 [INFO] ------------------------------------------------------------------------</div><div class="line">22:23:56 [INFO] Total time: 10.112s</div><div class="line">22:23:56 [INFO] Finished at: Thu Aug 10 22:23:56 CST 2017</div><div class="line">22:23:56 [INFO] Final Memory: 20M/59M</div><div class="line">22:23:56 [INFO] ------------------------------------------------------------------------</div><div class="line">22:23:56 Archiving artifacts</div><div class="line">22:23:56 Email was triggered for: Always</div><div class="line">22:23:56 Sending email for trigger: Always</div><div class="line">22:23:56 Not sending mail to unregistered user chengming@testin.cn because your SCM claimed this was associated with a user ID ‘chengming' which your security realm does not recognize; you may need changes in your SCM plugin</div><div class="line">22:23:56 An attempt to send an e-mail to empty list of recipients, ignored.</div><div class="line">22:23:56 Finished: SUCCESS</div></pre></td></tr></table></figure>
<p>意思是构建成功了，但是发送邮件发现提交代码的用户名是<code>chengming</code>而不是我在<code>Jenkins</code>中设置的<code>cmlanche</code>，然后Jenkins自动忽略了发送邮件的这个行为。</p>
<p>然后我在我的<code>sourcetree</code>中把提交代码的用户换回了<code>cmlanche</code>，任务自动构建，邮件发送成功！</p>
<h3 id="Jenkins分享（一）小结"><a href="#Jenkins分享（一）小结" class="headerlink" title="Jenkins分享（一）小结"></a>Jenkins分享（一）小结</h3><p><code>Jenkins</code>是一个非常方便的工具，免费开源，推荐大家都来学习，都折腾下，对你以后大有好处。我其实也是刚刚学这个，知道的还不多，还需要花很多时间去折腾，有更新的收获我会慢慢分享出来。</p>
<p>欢迎加入我的<code>Java栈群</code>：518914410，讨论有关Java的一切技术。</p>
<p>参考另一个小菜的文章：<a href="http://www.jianshu.com/p/b2ed4d23a3a9" target="_blank" rel="external">Jenkins+Github持续集成</a></p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <span>cmlanche</span>
    </p>
    <p class="copyright-item">
      <span>Origin: </span>
      <a href="http://www.cmlanche.com">http://www.cmlanche.com</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="http://www.cmlanche.com/2017/08/10/Jenkins自动集成小记(一)/">http://www.cmlanche.com/2017/08/10/Jenkins自动集成小记(一)/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/08/11/Postgres数据错误pg_ctl-cannot-be-run-as-root/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Postgres数据错误：pg_ctl cannot be run as root</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2017/06/08/JavaFx-TableView详解/">
        <span class="next-text nav-default">JavaFx TableView疑难详解</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
            <div class="wm-comment" id="wm_comment">
            </div>
          
          <!-- 
  <div class="comments" id="comments">
    
  </div>

 -->
        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017
    <span class="author"><a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备17020143号</a></span>
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">cmlanche</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  




<script>
wement = {
    appid: "8659f72674440553f1ee7890cc24345"
};
</script>


  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/wement.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.3.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.3.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            Read more..
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.3.x"></script>

  </body>
</html>
